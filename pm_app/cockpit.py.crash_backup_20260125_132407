

# __AION_BUILD_STAMP__
import os as _os, time as _time
_BUILD = _time.strftime("%Y%m%d_%H%M%S")
_BUILD_FILE = _os.path.basename(__file__)
import os
def column_header_row():
    return html.Div(
        style={
            "display": "grid",
            "gridTemplateColumns": "56px 1.6fr 1fr 1fr 1fr 0.8fr",
            "gap": "12px",
            "padding": "6px 0 10px 0",
            "fontSize": "11px",
            "fontWeight": 700,
            "letterSpacing": "0.12em",
            "color": "#94a3b8",
            "textTransform": "uppercase",
        },
        children=["", "Runner", "Theo", "Fixed", "Exchange", "+EV"],
    )
from dash import Dash, html

app = Dash(__name__, assets_folder=os.path.abspath(os.path.join(os.path.dirname(__file__), "..", "assets")))
app.title = "Project Aion — Glass Cockpit"

def race_btn(n: int):
    return html.Button(
        str(n),
        style={
            "width": "34px",
            "height": "34px",
            "borderRadius": "8px",
            "border": "1px solid #e5e7eb",
            "background": "#ffffff",
            "color": "#334155",
            "fontWeight": 800,
            "fontSize": "12px",
            "lineHeight": "34px",
            "padding": "0",
            "cursor": "pointer",
        },
    )

def runner_btn(n: int):
    return html.Button(
        str(n),
        style={
            "width": "44px",
            "height": "44px",
            "borderRadius": "12px",
            "border": "1px solid #e5e7eb",
            "background": "#ffffff",
            "color": "#0f172a",
            "fontWeight": 900,
            "fontSize": "14px",
            "lineHeight": "44px",
            "padding": "0",
            "cursor": "pointer",
        },
    )

def weather_icon():
    return html.Div(
        "☀︎",
        title="Weather (placeholder)",
        style={
            "width": "40px",
            "height": "40px",
            "borderRadius": "10px",
            "border": "1px solid #e5e7eb",
            "display": "flex",
            "alignItems": "center",
            "justifyContent": "center",
            "fontSize": "18px",
            "color": "#475569",
        },
    )

def column_header_row():
    return html.Div(
        style={
            "display": "grid",
            "gridTemplateColumns": "56px 1.6fr 1fr 1fr 1fr 0.8fr",
            "gap": "12px",
            "padding": "6px 0 10px 0",
            "fontSize": "11px",
            "fontWeight": 700,
            "letterSpacing": "0.12em",
            "color": "#94a3b8",
            "textTransform": "uppercase",
        },
        children=["", "Runner", "Theo", "Fixed", "Exchange", "+EV"],
    )
app.layout = html.Div([html.Div(, html.Div(
        f"v={_BUILD} · {_BUILD_FILE}",
        style={
            "position":"fixed","right":"14px","bottom":"12px",
            "padding":"6px 10px",
            "fontSize":"12px",
            "borderRadius":"10px",
            "background":"rgba(15, 23, 42, 0.65)",
            "color":"white",
            "backdropFilter":"blur(6px)",
            "border":"1px solid rgba(255,255,255,0.18)",
            "zIndex": 9999
        }
    )], style={"position":"relative"})
    style={
        "background": "#f6f7fb",
        "minHeight": "100vh",
        "fontFamily": "system-ui",
        "paddingBottom": "72px",
    },
    children=[
        # ================= HEADER REALM =================
        html.Div(
            style={
                "background": "#ffffff",
                "borderRadius": "24px",
                "minHeight": "180px",
                "padding": "12px 28px 16px 28px",
                "margin": "16px",
                "boxShadow": "0 10px 26px rgba(0,0,0,0.08)",
            },
            children=[
                html.Div(
                    style={
                        "display": "flex",
                        "alignItems": "center",
                        "justifyContent": "space-between",
                    },
                    children=[
                        html.Div(
                            style={"display": "flex", "alignItems": "center", "gap": "10px"},
                            children=[
                                html.Div(style={"fontSize": "34px"}),
                                html.Div([html.Img(src=app.get_asset_url("hk_flag.png"), style={"height":"34px","width":"52px","borderRadius":"6px","marginRight":"10px","verticalAlign":"middle","boxShadow":"0 2px 8px rgba(0,0,0,0.18)"}), "TH"], style={"color": "#2563eb", "fontWeight": 900}),
                                html.Div("SHA TIN", style={"fontSize": "22px", "fontWeight": 950}),
                                weather_icon(),
                                html.Div(
                                    style={"display": "flex", "gap": "6px"},
                                    children=[race_btn(i) for i in range(1, 11)],
                                ),
                            ],
                        ),
                        html.Div(
                            "PRE-RACE",
                            style={
                                "fontSize": "14px",
                                "fontWeight": 900,
                                "letterSpacing": "0.14em",
                                "color": "#2563eb",
                            },
                        ),
                    ],
                ),
            ],
        ),

        # ================= RUNNER REALM =================
        html.Div(
            style={
                "background": "#ffffff",
                "margin": "0 16px",
                "borderRadius": "18px",
                "padding": "12px 16px 16px 16px",
                "boxShadow": "0 6px 18px rgba(0,0,0,0.05)",
            },
            children=[
                # Step 3 — column header row
                column_header_row(),

                # Runner rows (placeholders only)
                *[
                    html.Div(
                        style={
                            "display": "grid",
                            "gridTemplateColumns": "56px 1.6fr 1fr 1fr 1fr 0.8fr",
                            "gap": "12px",
                            "padding": "10px 0",
                        },
                        children=[
                            html.Div(
                                runner_btn(i),
                                style={
                                    "display": "flex",
                                    "alignItems": "center",
                                    "justifyContent": "center",
                                },
                            ),
                            "", "", "", "", "",
                        ],
                    )
                    for i in range(1, 15)
                ],
            ],
        ),

        # ================= FIXED BOTTOM BAR =================
        html.Div(
            style={
                "position": "fixed",
                "bottom": "0",
                "left": "0",
                "right": "0",
                "height": "64px",
                "background": "#ffffff",
                "borderTop": "1px solid #e5e7eb",
                "display": "flex",
                "alignItems": "center",
                "justifyContent": "flex-end",
                "padding": "0 24px",
            },
            children=[
                html.Div("AION CONTROL BAR (buttons later)", style={"color": "#64748b"}),
            ],
        ),
    ],
)

if __name__ == "__main__":
    app.run(host="127.0.0.1", port=8051, debug=False)

